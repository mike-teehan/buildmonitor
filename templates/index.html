<!DOCTYPE html>
<html>
<head>
    <style>
#content, .bg {
    position: absolute;
    top: 0; bottom: 0;
    left: 0; right: 0;
}
.bg {
    background-image: url("/camera");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    flex-grow: 2;
}
    </style>
</head>
<body>
    <div id="content">
        <div style="display: flex; width: 100%; height: 100%;">
            <div style="width: 10em; display: flex; flex-direction: column;">
                <input id="newjobbtn" type="button" value="New Job">
                <select id="jobselect" size="8">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                </select>
            </div>
            <div style="flex-grow: 2; position: relative;">
                <div id="bg0" class="bg"></div>
                <div id="bg1" class="bg"></div>
            </div>
        </div>
    </div>
    <script src="/res/htmx.min.js"></script>
    <script>
"use strict";

const sleep = ms => new Promise(res => setTimeout(res, ms));

const bgupdater = async() => {
    let top = 1;
    const bg0 = document.getElementById("bg0");
    const bg1 = document.getElementById("bg1");
    while(true) {
        let bbg = (top == 1) ? bg0 : bg1;
        let fbg = (top == 1) ? bg1 : bg0;
        bbg.style.zIndex = -2;
        fbg.style.zIndex = -1;
        let randomid = Math.floor(Math.random() * 1000000);
        bbg.style.backgroundImage = `url("/camera?${randomid}")`;
//        console.log("boop");
        top = (top + 1) % 2;
        await sleep(1000);
    }
}

bgupdater();
    </script>
</body>
</html>
